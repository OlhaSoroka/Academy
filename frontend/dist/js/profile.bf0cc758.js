"use strict";(self["webpackChunkinventorsoft_vue_2022"]=self["webpackChunkinventorsoft_vue_2022"]||[]).push([[845],{7847:function(e,s,a){a.d(s,{Z:function(){return d}});var t=function(){var e=this,s=e._self._c;return s("div",[s("transition",{attrs:{name:"fade"}},[e.show?s("div",{staticClass:"modal"},[s("div",{staticClass:"modal__backdrop",on:{click:function(s){return e.closeModal()}}}),s("div",{staticClass:"modal__dialog"},[s("div",{staticClass:"modal__header"},[e._v(" "+e._s(e.header)+" ")]),s("div",{staticClass:"modal__body"},[e._t("body")],2),s("div",{staticClass:"modal__footer"},[e._t("footer")],2)])]):e._e()])],1)},o=[],i={name:"BaseModal",props:{header:{type:String,required:!0}},data(){return{show:!1}},methods:{closeModal(){this.show=!1,this.$emit("isClosed")},openModal(){this.show=!0,document.querySelector("body").classList.add("overflow-hidden")}}},l=i,r=a(1001),n=(0,r.Z)(l,t,o,!1,null,"7ade1820",null),d=n.exports},8187:function(e,s,a){a.d(s,{Z:function(){return n}});var t=function(){var e=this;e._self._c;return e._m(0)},o=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"flex justify-center border-none"},[s("div",{staticClass:"w-16 h-16 border-4 border-blue-400 border-double rounded-full animate-spin m-auto",staticStyle:{"border-top-color":"transparent"}})])}],i=a(1001),l={},r=(0,i.Z)(l,t,o,!1,null,null,null),n=r.exports},4108:function(e,s,a){a.r(s),a.d(s,{default:function(){return y}});var t=function(){var e=this,s=e._self._c;return s("div",{staticClass:"p-10"},[s("div",{staticClass:"profile-title"},[e._v(" My profile ")]),s("div",{staticClass:"flex justify-center"},[e.user?s("div",{staticClass:"profile-container"},[s("div",{staticClass:"profile__image_container"},[e.isImageLoaded?e._e():s("div",{staticClass:"profile__image_loading"},[s("BaseSpinner")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isImageLoaded,expression:"isImageLoaded"}],staticClass:"profile__image_block relative"},[s("div",{staticClass:"profile-image-bg profile-image-hover",on:{click:e.openProfileImageChangeModal}},[s("div",{staticClass:"text-white"},[s("svg",{staticClass:"w-8 h-8",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}})])])]),s("img",{attrs:{src:e.user.avatarUrl.path},on:{load:e.profileImageLoaded}})]),s("div",{staticClass:"profile-image-title"},[e._v(" "+e._s(e.user.fullName)+" ")])]),s("div",{staticClass:"profile-info-container"},[s("div",{staticClass:"profile-info-subtitle"},[s("span",{staticClass:"profile-info-title"},[e._v("Email: ")]),e._v(e._s(e.user.email)+" ")]),e.isUser?s("div",[s("div",{staticClass:"profile-info-subtitle"},[s("span",{staticClass:"profile-info-title"},[e._v("Course: ")]),e._v(e._s(e.user.course||"--")+" ")])]):e._e(),s("div",{staticClass:"mt-5"},[s("BaseButton",{on:{click:e.openPasswordChangeModal}},[e._v(" Change password ")])],1)])]):e._e(),s("div")]),s("ChangeImageModal",{attrs:{"toggle-modal":e.isChangeImageModalOpen},on:{onProfileImageChange:e.profileImageChanged}}),s("ChangePasswordModal",{attrs:{"toggle-modal":e.isChangePasswordModalOpen}})],1)},o=[],i=a(4146),l=function(){var e=this,s=e._self._c;return s("BaseModal",{ref:"profileImageModal",attrs:{header:"Change profile image"},scopedSlots:e._u([{key:"body",fn:function(){return[s("div",{staticClass:"flex flex-col items-center text-start mt-5"},[e.profileImageSrc?s("div",[s("img",{staticClass:"h-60 w-auto rounded-md",attrs:{src:e.profileImageSrc}})]):s("div",[e._v(" Please select image from your PC ")]),s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file"},on:{change:e.onImageSelected}}),s("div",{staticClass:"mt-5 flex"},[s("div",{staticClass:"w-24 mx-2"},[s("BaseButton",{attrs:{variant:"btn_red"},on:{click:e.cancel}},[e._v(" Cancel ")])],1),s("div",{staticClass:"w-24 mx-2"},[s("BaseButton",{on:{click:e.selectImage}},[e._v(" Select ")])],1),e.profileImageSrc?s("div",{staticClass:"w-24 mx-2"},[s("BaseButton",{on:{click:e.submitImage}},[e._v(" Submit ")])],1):e._e()])])]},proxy:!0}])})},r=[],n=a(7847),d=a(3822),c={components:{BaseButton:i.Z,BaseModal:n.Z},props:{toggleModal:{type:Boolean,default:!1}},data(){return{profileImageSrc:"",file:null}},watch:{toggleModal(){this.$refs.profileImageModal.openModal()}},mounted(){},methods:{...(0,d.nv)("user",["changeProfileImage"]),selectImage(){this.$refs.fileInput.click()},cancel(){this.profileImageSrc="",this.$refs.profileImageModal.closeModal()},onImageSelected(e){if(e.target.files[0]){this.file=e.target.files[0];const s=new FileReader;s.onloadend=()=>{this.profileImageSrc=s.result},s.readAsDataURL(this.file)}},submitImage(){this.file&&(this.changeProfileImage(this.file),this.profileImageSrc="",this.$emit("onProfileImageChange"),this.$refs.profileImageModal.closeModal())}}},u=c,f=a(1001),p=(0,f.Z)(u,l,r,!1,null,null,null),m=p.exports,g=function(){var e=this,s=e._self._c;return s("BaseModal",{ref:"passwordModal",attrs:{header:"Change password"},on:{isClosed:function(s){return e.clearInputs()}},scopedSlots:e._u([{key:"body",fn:function(){return[s("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function({invalid:a}){return[s("div",{staticClass:"flex flex-col items-center"},[s("div",{staticClass:"w-64"},[s("BaseInput",{attrs:{type:"password",label:"New password",vid:"password",placeholder:"Enter new password"},model:{value:e.newPassword,callback:function(s){e.newPassword=s},expression:"newPassword"}})],1),s("div",{staticClass:"w-64"},[s("BaseInput",{attrs:{type:"password",label:"Confirm new password",rules:"confirmed:password",vid:"confirmpassword",placeholder:"Confirm password"},model:{value:e.confirmedPassword,callback:function(s){e.confirmedPassword=s},expression:"confirmedPassword"}})],1),s("div",{staticClass:"w-full flex justify-around mt-5"},[s("div",{staticClass:"mx-1"},[s("BaseButton",{attrs:{variant:"btn_red"},on:{click:e.cancelPasswordChange}},[e._v(" Cancel ")])],1),s("div",{staticClass:"mx-1"},[s("BaseButton",{attrs:{disabled:a},on:{click:e.submitPasswordChange}},[e._v(" Submit ")])],1)])])]}}])})]},proxy:!0}])})},h=[],v=a(9046),w=a(5708),C={components:{BaseButton:i.Z,BaseModal:n.Z,BaseInput:v.Z,ValidationObserver:w._j},props:{toggleModal:{type:Boolean,default:!1}},data(){return{newPassword:"",confirmedPassword:""}},watch:{toggleModal(){this.$refs.passwordModal.openModal()}},methods:{...(0,d.nv)("user",["changePassword"]),clearInputs(){this.newPassword="",this.confirmedPassword=""},openPasswordChangeModal(){this.$refs.passwordModal.openModal()},submitPasswordChange(){this.changePassword(this.newPassword),this.$refs.passwordModal.closeModal(),this.clearInputs()},cancelPasswordChange(){this.$refs.passwordModal.closeModal(),this.clearInputs()}}},_=C,I=(0,f.Z)(_,g,h,!1,null,null,null),M=I.exports,b=a(8187),P=a(164),B={components:{BaseButton:i.Z,ChangeImageModal:m,ChangePasswordModal:M,BaseSpinner:b.Z},data(){return{isChangePasswordModalOpen:!1,isChangeImageModalOpen:!1,isImageLoaded:!1}},computed:{...(0,d.Se)("user",["user","isImageLoading"]),isUser(){return this.user.role===P.gl}},methods:{profileImageLoaded(){this.isImageLoaded=!0},profileImageChanged(){this.isImageLoaded=!1},openProfileImageChangeModal(){this.isChangeImageModalOpen=!this.isChangeImageModalOpen},openPasswordChangeModal(){this.isChangePasswordModalOpen=!this.isChangePasswordModalOpen}}},x=B,k=(0,f.Z)(x,t,o,!1,null,"72683deb",null),y=k.exports}}]);
//# sourceMappingURL=profile.bf0cc758.js.map