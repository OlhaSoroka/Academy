"use strict";(self["webpackChunkinventorsoft_vue_2022"]=self["webpackChunkinventorsoft_vue_2022"]||[]).push([[378],{9969:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"admins__container"},[a("div",{staticClass:"admins__topbar_container"},[e._m(0),a("div",[a("BaseButton",{attrs:{loading:e.isAdminsLoading},on:{click:function(a){return e.toggleCreateUpdateModal(null,!1)}}},[e._v(" Add new admin ")])],1)]),a("div",{staticClass:"admins__table_container"},[a("BaseTable",{attrs:{"table-data":{headingData:[{fullName:"Full Name"},{email:"Email"}],bodyData:e.admins},"edit-btns":!0,"is-data-loading":e.isAdminsLoading,"delete-btns":!0},on:{delete:function(a){return e.toggleDeleteAdminModal(a)},edit:function(a){return e.toggleCreateUpdateModal(a,!0)}}})],1),a("CreateUpdateAdminModal",{attrs:{admin:e.selectedAdmin,"update-mode":e.isUpdateMode,"toggle-modal":e.isCreateUpdateModalOpen}}),a("BaseDeleteModal",{attrs:{"toggle-modal":e.isDeleteModalOpen,"target-value":e.fullName},on:{delete:e.submitDelete}})],1)},d=[function(){var e=this,a=e._self._c;return a("div",[a("h2",{staticClass:"admins__header"},[e._v(" Admins Dashboard ")]),a("h3",{staticClass:"admins__subheader"},[e._v(" Admins list of InventorSoft Academy ")])])}],i=t(3296),l=t(4146),n=function(){var e=this,a=e._self._c;return a("BaseModal",{ref:"createUpdateAdminModal",attrs:{header:e.isUpdateMode?"Update admin":"Add new admin"},on:{isClosed:function(a){return e.clearInputs()}},scopedSlots:e._u([{key:"body",fn:function(){return[a("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function({invalid:t}){return[a("div",[a("div",{staticClass:"w-80"},[a("BaseInput",{ref:"fullName",attrs:{type:"text",label:"Full Name",placeholder:"Enter fullname",rules:"required"},model:{value:e.fullName,callback:function(a){e.fullName=a},expression:"fullName"}})],1),a("div",{staticClass:"w-80"},[a("BaseInput",{ref:"email",attrs:{type:"email",label:"Email",vid:"email",placeholder:"Enter email"},model:{value:e.email,callback:function(a){e.email=a},expression:"email"}})],1),!e.isUpdateMode||e.changePasswordMode?a("div",[a("div",{staticClass:"w-80"},[a("BaseInput",{attrs:{type:"password",label:"Password",vid:"password",placeholder:"Enter password"},model:{value:e.password,callback:function(a){e.password=a},expression:"password"}})],1),a("div",{staticClass:"w-80"},[a("BaseInput",{attrs:{type:"password",label:"Confirm password",placeholder:"Confirm password",vid:"confirmpassword",rules:"confirmed:password"},model:{value:e.confirmPassword,callback:function(a){e.confirmPassword=a},expression:"confirmPassword"}})],1)]):e._e(),a("div",{staticClass:"mt-6"},[e.isUpdateMode?a("div",{staticClass:"mx-1"},[a("BaseButton",{on:{click:e.toggleChangePassword}},[e._v(" "+e._s(e.changePasswordMode?"Hide password":"Change password")+" ")])],1):e._e()]),a("div",{staticClass:"flex justify-evenly mt-5"},[a("div",{staticClass:"mx-2"},[a("BaseButton",{attrs:{variant:"btn_red"},on:{click:e.cancelAddNewAdmin}},[e._v(" Cancel ")])],1),a("div",{staticClass:"mx-2"},[a("BaseButton",{attrs:{disabled:t},on:{click:e.submitAddNewAdmin}},[e._v(" "+e._s(e.isUpdateMode?"Update":"Create")+" ")])],1)])])]}}])})]},proxy:!0}])})},o=[],r=t(5708),m=t(9046),c=t(7847),u=t(164),p=t(3822),h={components:{BaseInput:m.Z,BaseButton:l.Z,BaseModal:c.Z,ValidationObserver:r._j},props:{toggleModal:{type:Boolean,default:!1},admin:{required:!1,type:Object,default:null}},data(){return{fullName:"",email:"",password:"",confirmPassword:"",changePasswordMode:!1}},computed:{isUpdateMode(){return!!this.admin}},watch:{toggleModal(){this.changePasswordMode=!1,this.$refs.createUpdateAdminModal.openModal(),this.isUpdateMode&&(this.fullName=this.admin.fullName,this.email=this.admin.email)}},methods:{...(0,p.nv)("admins",["createAdmin","updateAdmin"]),clearInputs(){this.fullName="",this.email="",this.password="",this.confirmPassword=""},submitAddNewAdmin(){this.isUpdateMode?this.updateAdminHandler():this.createAdminHandler(),this.$refs.createUpdateAdminModal.closeModal()},cancelAddNewAdmin(){this.clearInputs(),this.$refs.createUpdateAdminModal.closeModal()},toggleChangePassword(){this.changePasswordMode=!this.changePasswordMode},updateAdminHandler(){const e={id:this.admin.id,fullName:this.fullName,email:this.email};this.changePasswordMode&&(e.password=this.password),this.updateAdmin(e),this.clearInputs()},createAdminHandler(){const e={email:this.email,fullName:this.fullName,password:this.password,role:u.qy};this.createAdmin(e),this.clearInputs()}}},f=h,w=t(1001),v=(0,w.Z)(f,n,o,!1,null,null,null),A=v.exports,M=t(4682),g={components:{BaseTable:i.Z,BaseButton:l.Z,CreateUpdateAdminModal:A,BaseDeleteModal:M.Z},data(){return{selectedAdminId:null,isCreateUpdateModalOpen:!1,isUpdateMode:!1,isDeleteModalOpen:!1,fullName:null}},computed:{...(0,p.Se)("admins",["admins","isAdminsLoading"]),selectedAdmin(){return this.admins.find((e=>e.id===this.selectedAdminId))}},async mounted(){await this.fetchAdmins()},methods:{...(0,p.nv)("admins",["fetchAdmins","deleteAdmin"]),toggleCreateUpdateModal(e,a){this.selectedAdminId=e,this.isUpdateMode=a,this.isCreateUpdateModalOpen=!this.isCreateUpdateModalOpen},toggleDeleteAdminModal(e){this.selectedAdminId=e,this.isDeleteModalOpen=!this.isDeleteModalOpen,this.fullName=this.selectedAdmin.fullName,console.log(this.selectedAdmin.fullName,"selectedAdmin")},submitDelete(){this.deleteAdmin(this.selectedAdminId)}}},_=g,C=(0,w.Z)(_,s,d,!1,null,"1f16b7e0",null),b=C.exports}}]);
//# sourceMappingURL=managers.0eb55774.js.map